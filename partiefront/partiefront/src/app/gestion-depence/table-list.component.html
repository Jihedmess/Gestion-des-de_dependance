<div class="main-content">
  <div class="container-fluid">
        <div class="row">
                <div class="col-md-12">
                        <div class="card">
                            <div class="card-header card-header-danger">
                                <h4 class="card-title">Edit Depense</h4>
                                <p class="card-category">Complete your depense</p>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="row">
                                      
                                        <div class="col-md-6">
                                            <mat-form-field class="example-full-width">
                                              <input matInput placeholder="Designation" type="text" name ="designationDepence" [(ngModel)]="depence.designationDepence">
                                            </mat-form-field>
                                        </div>
                                        <div class="col-md-6">
                                            <mat-form-field class="example-full-width">
                                              <input matInput placeholder="Date depense" name ="dateDepence" type="date" [(ngModel)]="depence.dateDepence">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                          <mat-form-field class="example-full-width">
                                            <input matInput placeholder="Date echeance" name= "dateEcheance" type="date" [(ngModel)]="depence.dateEcheance">
                                          </mat-form-field>
                                        </div>
                                        <div class="col-md-6">
                                          <mat-form-field class="example-full-width">
                                            <input matInput placeholder="Montant" name ="montant" type="number" [(ngModel)]="depence.montant">
                                          </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                                <mat-form-field class="example-full-width">
                                                        <input matInput placeholder="Observation" name = "observation" type="text" [(ngModel)]="depence.observation">
                                                      </mat-form-field>
                                        </div>
                                        <div class="col-md-6">
                        <div class="form-group">
                                Centre d'interet 
                                <select class="form-control form-control-lg" [(ngModel)]="depence.idCI" name="type">
                                                  
                                        <option [value]="ci.designationCI" *ngFor="let ci of listCentreInteret ">{{ci.designationCI}}</option>
                                       
                                        
                                </select>
                         </div>       
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                        <div class="form-group">
                                Mode de paiement
                                <select class="form-control form-control-lg" [(ngModel)]="depence.idMP" name="type">
                                                  
                                        <option [value]="mp.designationMP" *ngFor="let mp of listMPayement ">{{mp.designationMP}}</option>
                                       
                                        
                                </select>
                        </div>        
                  </div>
                  <div class="col-md-6">
                        <div class="form-group">
                            Fournisseur
                                <select class="form-control form-control-lg" [(ngModel)]="depence.idFournisseur" name="type">
                                                  
                                        <option [value]="f.matricule" *ngFor="let f of listFournisseur">{{f.matricule}}</option>
                                       
                                        
                                      </select>
                        </div>
                    </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    
                    
                        <div class="form-group">
                                Type de depense
                    <select class="form-control form-control-lg" [(ngModel)]="depence.idType" name="type">
                    <option [value]="type.designation" *ngFor="let type of listType ">{{type.designation}}</option>
                    </select>
                    </div>
                </div>
                 
            </div>
            
                                    <button mat-raised-button (click)="createDepence()" class="btn btn-danger pull-right">Add </button>
                                    <div class="clearfix"></div>
                                </form>
                            </div>
                        </div>
                    </div>
              <div class="col-md-12">
                  <div class="card">
                      <div class="card-header card-header-danger">
                         
                          <p class="card-category"> Liste des depenses</p>
                      </div>
                      <div class="card-body">
                          <div class="table-responsive">
                              <table class="table" *ngIf ="table">
                                  <thead class=" text-primary">
                                      <th >
                                          ID
                                      </th>
                                      <th >
                                          Designation
                                      </th>
                                      <th >
                                          Date depense
                                      </th>
                                      <th>
                                          Date echeance
                                      </th>
                                      <th>
                                          Montant
                                      </th>
                                      <th>
                                            Observation
                                        </th>
                                        <th >
                                            Centre d'interet
                                        </th>
                                        <th>
                                            Mode de paiement
                                        </th>
                                        <th>
                                            Fournisseur
                                        </th>
                                        <th>
                                            Type
                                        </th>
                                        <th >
                                            Action
                                        </th>
                                  </thead>
                                  <tbody *ngFor = "let item of listdepence">
                                      <tr>
                                          <td >
                                            {{item.idDepence}}
                                          </td>
                                          <td>
                                             {{item.designationDepence}}
                                          </td>
                                          <td>
                                            {{item.dateDepence |date: 'dd/MM/yyyy'}} 
                                          </td>
                                          <td>
                                            {{item.dateEcheance | date: 'dd/MM/yyyy'}}
                                          </td>
                                          <td >
                                            {{item.montant}}
                                            </td>
                                            <td >
                                                {{item.observation}}
                                            </td>
                                            <td>
                                                {{item.refFacture}}
                                            </td>
                                            <td>
                                                {{item.idCI}}
                                            </td>
                                            <td >
                                                {{item.idMP}}
                                            </td>
                                            <td>
                                                {{item.idFournisseur}}
                                            </td>
                                            <td>
                                                {{item.idType}}
                                            </td>
                                          <td class="text-primary">
                                                <button mat-raised-button type="button" (click)="open(content,item.idDepence)" matTooltip="Edit Task" [matTooltipPosition]="'above'" class="btn btn-primary btn-link btn-sm btn-just-icon">
                                                        <i class="material-icons">edit</i>
                                                    </button>
                                                    <button mat-raised-button (click)="delete(item.idDepence)" matTooltip="Remove" [matTooltipPosition]="'above'" class="btn btn-danger btn-link btn-sm btn-just-icon">
                                                        <i class="material-icons">close</i>
                                                </button>
                                          </td>
                                      </tr>
                                     
                                  </tbody>
                              </table>
                          </div>
                      </div>
                  </div>
              </div>
             
          </div>
  </div>
</div>
<ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Update depense</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <form>
            <div class="row">
              
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                      <input matInput placeholder="Designation" type="text" name ="designationDepence" [(ngModel)]="depence.designationDepence">
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                      <input matInput placeholder="Date depence" name ="dateDepence" type="date" [(ngModel)]="depence.dateDepence">
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <input matInput placeholder="Date echeance" name= "dateEcheance" type="date" [(ngModel)]="depence.dateEcheance">
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <input matInput placeholder="Montant" name ="montant" type="number" [(ngModel)]="depence.montant">
                  </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                        <mat-form-field class="example-full-width">
                                <input matInput placeholder="Observation" name = "observation" type="text" [(ngModel)]="depence.observation">
                              </mat-form-field>
                </div>
                <div class="col-md-6">
                        <div class="form-group">
                                Typecentre interet 
                                <select class="form-control form-control-lg" [(ngModel)]="depence.idCI" name="type">
                                                  
                                        <option [value]="ci.designationCI" *ngFor="let ci of listCentreInteret ">{{ci.designationCI}}</option>
                                       
                                        
                                </select>
                         </div>       
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                        <div class="form-group">
                                mode paiement
                                <select class="form-control form-control-lg" [(ngModel)]="depence.idMP" name="type">
                                                  
                                        <option [value]="mp.matricule" *ngFor="let mp of listMPayement ">{{mp.designationMP}}</option>
                                       
                                        
                                </select>
                        </div>        
                  </div>
                  <div class="col-md-6">
                        <div class="form-group">
                            Fournisseur
                                <select class="form-control form-control-lg" [(ngModel)]="depence.idFournisseur" name="type">
                                                  
                                        <option [value]="f.matricule" *ngFor="let f of listFournisseur">{{f.matricule}}</option>
                                       
                                        
                                      </select>
                        </div>
                    </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    
                    
                        <div class="form-group">
                                Type
                    <select class="form-control form-control-lg" [(ngModel)]="depence.idType" name="type">
                    <option [value]="type.designation" *ngFor="let type of listType ">{{type.designation}}</option>
                    </select>
                    </div>
                </div>
                 
            </div>
            
            <div class="clearfix"></div>
        </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="upadate()">Save</button>
    </div>
  </ng-template>